#N canvas 279 156 1314 827 12;
#X obj 94 405 markov;
#A saved memory;
#A saved indices 0;
#A saved markov;
#A saved order.in 4;
#A saved order 4;
#A saved markov.index 3594;
#X msg 113 160 make;
#X msg 131 210 reset;
#X msg 140 266 random;
#X msg 153 315 clear;
#X text 171 111 Set the order;
#X text 154 159 Create the chains;
#X text 196 316 Clear all contents;
#X text 195 267 Set the player to random position;
#X text 174 212 Set the player to starting position;
#X msg 94 110 order \$1;
#X obj 94 58 loadbang;
#X obj 878 586 text sequence \$0-midiFile;
#X floatatom 52 58 5 1 100 0 - - -;
#X obj 426 83 list split 1;
#X obj 1050 610 text size \$0-midiFile;
#X obj 153 291 r \$0-init;
#X text 1070 585 Jonathan Frank 2022;
#N canvas 622 378 608 339 player 0;
#X obj 112 235 del;
#X obj 130 137 r \$0-tempo;
#X obj 55 92 bng 15 250 50 0 empty \$0-play play 17 7 0 10 -262144
-1 -1;
#X obj 444 61 loadbang;
#X msg 444 85 1;
#X obj 444 134 loadbang;
#X msg 444 158 1;
#X obj 112 285 s \$0-markov_bang;
#X obj 112 112 r \$0-delay;
#X obj 444 207 loadbang;
#X msg 444 231 200;
#X obj 444 109 s \$0-tempo;
#X obj 444 182 s \$0-velocity;
#X obj 444 255 s \$0-note_length;
#X obj 112 211 * 1;
#X obj 130 162 * -1;
#X obj 130 187 + 2;
#X obj 112 260 spigot 1;
#X msg 233 260 save record.mid;
#X msg 211 233 stop;
#X obj 233 285 s \$0-record_midi;
#X msg 223 186 record;
#X obj 165 166 bng 15 250 50 0 empty \$0-stop stop 17 7 0 10 -262144
-1 -1;
#X msg 165 211 0;
#X obj 55 112 t b b b;
#X msg 78 137 1;
#X obj 165 236 == 1;
#X obj 262 61 text size \$0-midiFile;
#X obj 223 111 spigot;
#X obj 223 37 t b b;
#X obj 262 86 > 0;
#X obj 165 186 t b b b;
#X msg 255 161 clear;
#X obj 279 186 r \$0-init;
#X obj 223 136 t b b;
#X connect 0 0 17 0;
#X connect 1 0 15 0;
#X connect 2 0 24 0;
#X connect 3 0 4 0;
#X connect 4 0 11 0;
#X connect 5 0 6 0;
#X connect 6 0 12 0;
#X connect 8 0 14 0;
#X connect 9 0 10 0;
#X connect 10 0 13 0;
#X connect 14 0 0 0;
#X connect 15 0 16 0;
#X connect 16 0 14 1;
#X connect 17 0 7 0;
#X connect 18 0 20 0;
#X connect 19 0 20 0;
#X connect 21 0 20 0;
#X connect 22 0 31 0;
#X connect 23 0 26 0;
#X connect 24 0 7 0;
#X connect 24 1 25 0;
#X connect 24 2 29 0;
#X connect 25 0 26 0;
#X connect 26 0 17 1;
#X connect 27 0 30 0;
#X connect 28 0 34 0;
#X connect 29 0 28 0;
#X connect 29 1 27 0;
#X connect 30 0 28 1;
#X connect 31 0 23 0;
#X connect 31 1 18 0;
#X connect 31 2 19 0;
#X connect 32 0 20 0;
#X connect 33 0 19 0;
#X connect 34 0 21 0;
#X connect 34 1 32 0;
#X restore 138 430 pd player;
#X obj 170 339 r \$0-markov_bang;
#X obj 191 363 r \$0-midi_list;
#X obj 126 455 s \$0-delay;
#X obj 159 58 r \$0-markovOrder;
#X obj 140 241 r \$0-markovRandom;
#X obj 131 185 r \$0-markovReset;
#X obj 878 35 r \$0-loadMidiFile;
#X msg 94 82 4;
#X obj 792 160 r \$0-record_midi;
#X obj 878 760 s \$0-midi_list;
#X obj 950 711 spigot;
#X obj 910 636 list split 1;
#X obj 989 687 expr if($f1 >= 192 && $f1 < 207 \, 1 \, 0), f 39;
#X obj 950 660 t l f;
#X obj 484 208 r \$0-program;
#X obj 113 135 r \$0-markovMake;
#X obj 878 611 t l l;
#X obj 505 158 != 255;
#X obj 466 183 spigot;
#N canvas 72 96 450 300 list-drip 0;
#X obj 164 74 inlet;
#X obj 164 184 list store;
#X obj 164 118 until;
#X obj 164 140 f;
#X obj 194 140 + 1;
#X msg 164 162 get \$1 1;
#X obj 207 119 0;
#X obj 164 206 outlet;
#X obj 231 206 outlet;
#X obj 164 96 t b b a;
#X connect 0 0 9 0;
#X connect 1 0 7 0;
#X connect 1 1 8 0;
#X connect 1 1 2 1;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 3 0 4 0;
#X connect 4 0 3 1;
#X connect 5 0 1 0;
#X connect 6 0 3 1;
#X connect 9 0 2 0;
#X connect 9 1 6 0;
#X connect 9 2 1 1;
#X restore 466 548 pd list-drip;
#X obj 466 322 route 0 1;
#X obj 466 298 list prepend;
#X obj 577 358 r \$0-note_length;
#X obj 496 346 t l l;
#X obj 496 431 pack f f 0;
#X obj 496 383 pipe 0 0 0 0;
#X obj 496 407 - 16;
#X obj 498 262 expr if($f1 >= 144 && $f1 < 160 \, 1 \, 0);
#X obj 466 238 t l f;
#X obj 647 407 r \$0-velocity;
#X obj 629 431 * 1;
#X obj 589 383 list split 2;
#X obj 604 455 list;
#X obj 94 480 s \$0-markov_list;
#X obj 426 58 r \$0-markov_list;
#X obj 466 573 s \$0-record_midi;
#X obj 512 133 s markov_list;
#X obj 498 523 s midi_out;
#X obj 466 498 t l l;
#X obj 1050 635 print size;
#X obj 466 108 t l f l;
#X obj 94 430 t l f;
#X msg 878 561 line 0;
#X obj 966 85 s \$0-init;
#X obj 930 195 midi;
#X msg 948 110 open \$1;
#X msg 913 160 dump_delta;
#X msg 930 135 dump;
#X obj 930 511 list store;
#X obj 930 463 list prepend append;
#X obj 930 487 list trim;
#X obj 930 365 t f f;
#X obj 962 414 sel;
#X obj 962 438 t b b;
#X obj 949 315 list;
#X obj 942 220 t f b;
#X obj 974 245 f;
#X obj 1005 245 + 1;
#X msg 986 213 0;
#X obj 979 291 text get \$0-midiFile;
#X obj 978 268 t f f;
#X obj 997 561 text set \$0-midiFile 1e+07;
#X obj 878 60 t b b b b a b;
#X obj 986 188 r \$0-init;
#X obj 949 340 text set \$0-midiFile;
#X obj 962 391 expr if($f1 > 127 \, 0 \, 1);
#X msg 587 549 clear;
#X obj 587 524 r \$0-init;
#X obj 587 573 text define \$0-midiFile;
#X obj 878 516 t b b;
#X obj 950 735 s \$0-program;
#X obj 519 83 r \$0-program;
#X obj 930 536 route bang;
#X connect 0 0 60 0;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 10 0 0 0;
#X connect 11 0 26 0;
#X connect 12 0 35 0;
#X connect 12 1 15 0;
#X connect 13 0 10 0;
#X connect 14 1 59 0;
#X connect 15 0 58 0;
#X connect 16 0 4 0;
#X connect 19 0 0 0;
#X connect 20 0 0 1;
#X connect 22 0 10 0;
#X connect 23 0 3 0;
#X connect 24 0 2 0;
#X connect 25 0 81 0;
#X connect 26 0 10 0;
#X connect 27 0 63 0;
#X connect 29 0 89 0;
#X connect 30 1 32 0;
#X connect 31 0 29 1;
#X connect 32 0 29 0;
#X connect 32 1 31 0;
#X connect 33 0 47 0;
#X connect 34 0 1 0;
#X connect 35 0 28 0;
#X connect 35 1 30 0;
#X connect 36 0 37 1;
#X connect 37 0 47 0;
#X connect 38 0 54 0;
#X connect 39 0 57 0;
#X connect 39 1 42 0;
#X connect 40 0 39 0;
#X connect 41 0 44 3;
#X connect 42 0 44 0;
#X connect 42 1 50 0;
#X connect 43 0 57 0;
#X connect 44 0 45 0;
#X connect 44 1 43 1;
#X connect 45 0 43 0;
#X connect 46 0 40 1;
#X connect 47 0 40 0;
#X connect 47 1 46 0;
#X connect 48 0 49 1;
#X connect 49 0 51 1;
#X connect 50 0 51 0;
#X connect 50 1 49 0;
#X connect 51 0 57 0;
#X connect 53 0 14 0;
#X connect 57 0 38 0;
#X connect 57 1 56 0;
#X connect 59 0 37 0;
#X connect 59 1 36 0;
#X connect 59 2 55 0;
#X connect 60 0 52 0;
#X connect 60 1 21 0;
#X connect 61 0 12 0;
#X connect 63 0 70 0;
#X connect 63 1 74 0;
#X connect 64 0 63 0;
#X connect 65 0 63 0;
#X connect 66 0 63 0;
#X connect 67 0 91 0;
#X connect 68 0 69 0;
#X connect 69 0 67 0;
#X connect 70 0 68 0;
#X connect 70 1 84 0;
#X connect 71 0 72 0;
#X connect 72 0 67 1;
#X connect 72 1 67 0;
#X connect 73 0 83 0;
#X connect 74 0 73 0;
#X connect 74 1 75 0;
#X connect 75 0 76 0;
#X connect 75 0 79 0;
#X connect 76 0 75 1;
#X connect 77 0 75 1;
#X connect 78 0 73 1;
#X connect 79 0 78 0;
#X connect 79 1 83 1;
#X connect 81 0 88 0;
#X connect 81 2 65 0;
#X connect 81 3 66 0;
#X connect 81 4 64 0;
#X connect 81 5 62 0;
#X connect 82 0 77 0;
#X connect 84 0 71 0;
#X connect 85 0 87 0;
#X connect 86 0 85 0;
#X connect 88 0 12 0;
#X connect 88 1 61 0;
#X connect 90 0 59 0;
#X connect 91 1 80 0;
